import{u as p,r as m,a as f,j as t,b as v,c as x,t as y,L as _,M as u,d as C,l as b,m as N,e as L}from"./index-d82af34a.js";const P="_productList_1qcf6_3",w={productList:P},S="_formContainer_16kop_1",k="_form_16kop_1",l={formContainer:S,form:k},E=()=>{const i=p(),[o,r]=m.useState(""),[e,n]=f("product",{title:"",description:"",category:"",price:"",image:""}),a=c=>{const{name:g,value:j}=c.target;n({...e,[g]:j})};function s(){const c=/^(https?:\/\/)?([\w.-]+\.\w{2,})(\/\S*)?$/;return e.title.trim()===""?(r("title is not valid"),!1):e.description.trim()===""?(r("description is not valid"),!1):e.category.trim()===""?(r("category is not valid"),!1):e.price.trim()===""||Number.isNaN(Number(e.price))?(r("price is not valid"),!1):c.test(e.image)?!0:(r("url is not valid"),!1)}const h=c=>{c.preventDefault(),r(""),sessionStorage.setItem("price",e.price),s()&&i(v(e))};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:l.formContainer,children:t.jsxs("form",{className:l.form,onSubmit:h,action:"",children:[t.jsx("label",{children:"Добавить новый продукт:"}),t.jsx("input",{name:"title",onChange:a,placeholder:"title",type:"text",value:e.title}),t.jsx("input",{name:"description",onChange:a,placeholder:"description",type:"text",value:e.description}),t.jsx("input",{name:"category",onChange:a,placeholder:"category",type:"text",value:e.category}),t.jsx("input",{name:"price",onChange:a,placeholder:"price",type:"text",value:e.price}),t.jsx("input",{name:"image",onChange:a,placeholder:"image",type:"text",value:e.image}),t.jsx("button",{className:l.button,type:"submit",children:"Добавить файл"})]})}),t.jsx("div",{style:{textAlign:"center"},children:o&&t.jsx("span",{style:{color:"red"},children:o})})]})},W="_productCard_1g40o_1",A="_title_1g40o_12",D="_imgWrapper_1g40o_22",d={productCard:W,title:A,imgWrapper:D},F=({id:i,title:o,image:r,price:e})=>{const n=p(),{favorites:a}=x(s=>s.products);return t.jsx("div",{children:t.jsxs("li",{className:d.productCard,children:[t.jsx("span",{className:d.title,children:o}),t.jsx("div",{className:d.imgWrapper,children:t.jsx("img",{src:r,alt:""})}),t.jsxs("span",{children:["Цена: ",e]}),t.jsx("svg",{style:{cursor:"pointer"},width:"30px",height:"30px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",version:"1.1",onClick:()=>n(y(i)),fill:a.includes(i)?"#e74c3c":"lightgrey",children:t.jsx("g",{transform:"translate(0 -1028.4)",children:t.jsx("path",{d:"m7 1031.4c-1.5355 0-3.0784 0.5-4.25 1.7-2.3431 2.4-2.2788 6.1 0 8.5l9.25 9.8 9.25-9.8c2.279-2.4 2.343-6.1 0-8.5-2.343-2.3-6.157-2.3-8.5 0l-0.75 0.8-0.75-0.8c-1.172-1.2-2.7145-1.7-4.25-1.7z"})})}),t.jsx(_,{to:String(i),children:t.jsx(u,{text:"To product"})}),t.jsx(u,{text:"Delete",onClick:()=>n(C(i))})]},i)})},B=()=>{const i=p(),{products:o,error:r,isLoading:e,favorites:n}=x(s=>s.products);m.useEffect(()=>{i(b())},[]);const a={hidden:{opacity:0,y:-20},visible:{opacity:1,y:0,transition:{duration:.5}}};return t.jsxs(N.div,{initial:"hidden",animate:"visible",variants:a,children:[t.jsx(E,{}),e&&t.jsx(L,{}),r&&t.jsxs("h4",{style:{color:"red"},children:["Error ",r]}),!e&&t.jsx("ul",{className:w.productList,children:o.map(s=>t.jsx(F,{id:s.id,title:s.title,image:s.image,price:s.price},s.id))})]})};export{B as default};
